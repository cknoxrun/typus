<% applications.each do |app, models| %>

  <table>

    <tr>
      <th colspan="2"><%= app %></th>
    </tr>

    <% models.each do |model| %>

      <%

        klass = Typus::AbstractModel.new(model)
        klass_resource = klass.to_resource
        klass_human_name = klass.model_name.human.gsub("/", " ").pluralize

        options = { :controller => "admin/#{klass_resource}" }
        admin_items_path = options
        new_admin_item_path = options.merge(:action => "new")

      %>

      <tr class="<%= cycle("even", "odd") %>">

        <td>
          <%= link_to klass_human_name, admin_items_path %><br />
          <small><%= _(klass.description) if !klass.description.nil? %></small>
        </td>

        <td class="right">
          <%= link_to_if @current_user.can?("create", klass), _("Add"), new_admin_item_path %>
        </td>

      </tr>

    <% end %>

  </table>

<% end %>
